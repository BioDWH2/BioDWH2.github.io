var Y=Object.defineProperty;var j=(t,e,o)=>e in t?Y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var f=(t,e,o)=>(j(t,typeof e!="symbol"?e+"":e,o),o);import{d as O,S as a,U as p,V as s,W as c,k as n,u as A,X as F,N as y,x as B,Y as C,Z as S,_ as g,$ as k,F as P,G as ee,I as te,a0 as G,a1 as oe}from"./@vue-0ee5835c.js";import{R as ne,c as se,a as le}from"./vue-router-407da814.js";import{u as R,a as re,b as ae,c as ie,d as ce,e as de}from"./vuetify-0b013b92.js";import{c as ue,m as K,a as me}from"./vuex-0f554ba2.js";import{m as pe,s as fe,a as he,c as q}from"./mathjs-7c8a9ace.js";import{S as Z}from"./vue-echarts-7aab8e24.js";import{u as _e,a as ve,b as ge,c as be,d as ye,e as ze,f as Se}from"./echarts-322851ea.js";import{c as we}from"./vue-i18n-437a69d2.js";/* empty css             */import"./decimal.js-d133ee8e.js";import"./@babel-98964cd2.js";import"./javascript-natural-sort-e357e139.js";import"./complex.js-9c2395ef.js";import"./typed-function-4896e4f1.js";import"./fraction.js-5fe3c316.js";import"./resize-detector-a5205554.js";import"./tslib-54e39b60.js";import"./zrender-edd2ac55.js";import"./@intlify-b069a221.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function o(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(l){if(l.ep)return;l.ep=!0;const i=o(l);fetch(l.href,i)}})();const Ne={class:"links"},ke={href:"https://agbi.techfak.uni-bielefeld.de",target:"_blank"},Pe={href:"https://techfak.de",target:"_blank"},Ce={href:"https://www.uni-bielefeld.de",target:"_blank"},Ve={data(){return{themeDark:"dark",themeLight:"light",theme:R().global.name,language:re().current.value}},mounted(){window.matchMedia("(prefers-color-scheme: dark)")?this.theme=this.themeDark:this.theme=this.themeLight},watch:{language(){this.$i18n.locale=this.language}},methods:{toggleTheme(){this.theme==this.themeDark?this.theme=this.themeLight:this.theme=this.themeDark}}},$e=O({...Ve,__name:"App",setup(t){return(e,o)=>{const r=a("v-img"),l=a("v-toolbar-title"),i=a("router-link"),d=a("v-btn"),h=a("v-tooltip"),_=a("v-btn-toggle"),w=a("v-menu"),V=a("v-toolbar"),b=a("v-spacer"),I=a("v-footer"),D=a("v-theme-provider"),T=a("v-locale-provider"),m=a("v-app");return c(),p(m,null,{default:s(()=>[n(T,{locale:e.language},{default:s(()=>[n(D,{theme:e.theme},{default:s(()=>[n(V,null,{default:s(()=>[n(i,{to:"/",custom:""},{default:s(({navigate:u})=>[A(ae)().width.value>=550?(c(),p(r,{key:0,class:"cursor-pointer",onClick:u,src:"./Logo.svg","max-width":"170"},null,8,["onClick"])):F("",!0),n(l,{class:"cursor-pointer",onClick:u},{default:s(()=>[y("Mapping-Spy")]),_:2},1032,["onClick"])]),_:1}),n(w,null,{activator:s(({props:u})=>[n(h,{text:"Language",location:"bottom"},{activator:s(({props:v})=>[n(d,B(B(u,v),{icon:"mdi-translate"}),null,16)]),_:2},1024)]),default:s(()=>[n(_,{modelValue:e.language,"onUpdate:modelValue":o[0]||(o[0]=u=>e.language=u)},{default:s(()=>[n(d,{value:"de"},{default:s(()=>[y("Deutsch")]),_:1}),n(d,{value:"en"},{default:s(()=>[y("English")]),_:1})]),_:1},8,["modelValue"])]),_:1}),n(h,{text:e.$t("Theme"),location:"bottom"},{activator:s(({props:u})=>[A(R)().global.current.value.dark?(c(),p(d,B({key:0},u,{onClick:e.toggleTheme,icon:"mdi-weather-sunny"}),null,16,["onClick"])):F("",!0),A(R)().global.current.value.dark?F("",!0):(c(),p(d,B({key:1},u,{onClick:e.toggleTheme,icon:"mdi-weather-night"}),null,16,["onClick"]))]),_:1},8,["text"]),n(h,{text:"GitHub",location:"bottom"},{activator:s(({props:u})=>[n(d,B(u,{icon:"mdi-github",href:"https://github.com/BioDWH2"}),null,16)]),_:1}),n(h,{text:e.$t("Documentation"),location:"bottom"},{activator:s(({props:u})=>[n(d,B(u,{icon:"mdi-file-document",href:"https://github.com/BioDWH2/BioDWH2/blob/master/README.md"}),null,16)]),_:1},8,["text"]),n(h,{text:e.$t("ReportError"),location:"bottom"},{activator:s(({props:u})=>[n(d,B(u,{icon:"mdi-bug",href:"https://github.com/BioDWH2/BioDWH2/issues"}),null,16)]),_:1},8,["text"])]),_:1}),n(A(ne)),n(b),n(b),n(I,null,{default:s(()=>[C("div",Ne,[y(" © 2023 - "),C("a",ke,S(e.$t("BioinformaticsDepartment")),1),y(", "),C("a",Pe,S(e.$t("FacultyOfTechnology")),1),y(", "),C("a",Ce,S(e.$t("BielefeldUniversity")),1)])]),_:1})]),_:1},8,["theme"])]),_:1},8,["locale"])]),_:1})}}});class H extends Map{getValue(e,o){return this.has(e)||this.set(e,new Map),this.get(e).get(o)}setValue(e,o,r){this.has(e)||this.set(e,new Map),this.get(e).set(o,r)}}class J extends H{addMap(e){for(const[o,r]of e.entries())for(const[l,i]of r.entries()){const d=this.getValue(o,l)||0;this.setValue(o,l,d+i)}}}class Ae{constructor(e,o){f(this,"allIds");f(this,"countAllNodes");f(this,"countCurrentNode");if(this.allIds=e,this.countCurrentNode=1,this.countAllNodes=0,o)for(const r of o.values())this.countAllNodes+=r}get probability(){return this.allIds>0?this.countCurrentNode/this.allIds:0}get score(){return this.probability>0?this.countAllNodes/this.probability:0}}class Ie{constructor(e){f(this,"prefix");f(this,"id");f(this,"value");this.value=e,[this.prefix,this.id]=e.split(":")}}class Le extends Array{constructor(e){super();for(const o of e)this.push(new Ie(o))}}class Be{constructor(e){f(this,"source");f(this,"name");f(this,"value");this.value=e,this.value.includes("_")?[this.source,this.name]=e.split("_"):(this.source="",this.name=e)}}class Q{constructor(e){f(this,"id");f(this,"label");f(this,"ids");f(this,"names");f(this,"__mapped");f(this,"children");f(this,"scores");f(this,"namesSorted");f(this,"idsSorted");this.id=e.id,this.label=new Be(e.label),this.ids=new Le(e.ids),this.names=e.names;const o=e.__mapped;this.__mapped=o||!1,this.children=new E,this.children.load(e.children),this.scores=new Map,this.namesSorted=!1,this.idsSorted=!1}hasPrefix(e){for(const o of this.ids)if(o.prefix==e)return!0;return!1}getPrefixes(){const e=new Map;for(const r of this.ids)e.set(r.prefix,"");const o=new Array;for(const r of e.keys())o.push(r);return o}getSortedNames(){if(!this.namesSorted){const e=new Intl.Collator(void 0,{sensitivity:"base"});this.names.sort((o,r)=>e.compare(o,r)),this.namesSorted=!0}return this.names}getSortedIds(){if(!this.idsSorted){const e=new Intl.Collator(void 0,{sensitivity:"base"});this.ids.sort((o,r)=>e.compare(o.value,r.value)),this.idsSorted=!0}return this.ids}calcPrefixBySource(e){if(this.children.length==0){const o=this.label.source;for(const r of this.ids){const l=r.prefix;e.setValue(l,o,(e.getValue(l,o)||0)+1)}}else for(const o of this.children)o.calcPrefixBySource(e)}calcScores(){const e=new H;this.calcPrefixBySource(e);for(const o of this.ids){const r=o.prefix,l=this.scores.get(r);l!=null?l.countCurrentNode++:this.scores.set(r,new Ae(this.ids.length,e.get(r)))}}getRootOccurrences(e,o){let r=0;if(this.children.length==0)this.label.source==e&&this.hasPrefix(o)&&(r=1);else if(this.hasPrefix(o))for(const l of this.children)r+=l.getRootOccurrences(e,o);return r}getAllRootOccurrences(){const e=new J;if(this.children.length==0)for(const o of this.ids)e.setValue(this.label.source,o.prefix,1);else for(const o of this.children)e.addMap(o.getAllRootOccurrences());return e}getScore(e){var o;return this.scores.size==0&&this.calcScores(),Math.round(((o=this.scores.get(e))==null?void 0:o.score)||0)}getBadPrefixes(){const e=new Array;for(const i of this.getPrefixes())e.push(this.getScore(i));const o=pe(e),r=fe(e,"unbiased"),l=[];for(const i of this.getPrefixes())he(o-this.getScore(i))>r&&l.push(i);return l}getSourcesByPrefix(e){const o=new Array;let r=!1;for(const l of this.children)if(l.hasPrefix(e)&&l.getBadPrefixes().includes(e)){r=!0;for(const i of l.getSourcesByPrefix(e))o.includes(i)||o.push(i)}if(!r){const l=this.label.source;l!=""&&(o.includes(l)||o.push(l));for(const i of this.children)if(i.hasPrefix(e))for(const d of i.getSourcesByPrefix(e))o.includes(d)||o.push(d)}return o}getBadSourcesByPrefix(){const e=new Map;for(const o of this.getBadPrefixes())e.set(o,this.getSourcesByPrefix(o));return e}}class E extends Array{load(e){for(const o of e)this.push(new Q(o))}}class W extends H{getInitializedValue(e,o){let r=this.getValue(e,o);return r===void 0&&(r=new E,this.setValue(e,o,r)),r}sort(){for(const e of this.values())for(const[o,r]of e)r.sort((l,i)=>-1*q(l.getScore(o),i.getScore(o)))}}class xe extends Map{constructor(){super(...arguments);f(this,"nodesPerLabel",new Map);f(this,"globalAnalysis",new W);f(this,"blamingSources",new W);f(this,"rootOccurrences",new J);f(this,"selectedFiles",[])}calcNodesPerLabel(){var r;const o=new Map;for(const l of this.values())o.has(l.label.value)||o.set(l.label.value,new E),(r=o.get(l.label.value))==null||r.push(l);for(const[l,i]of o.entries()){const d=i.sort((_,w)=>w.ids.length-_.ids.length).slice(0,10),h=new E;for(const _ of d)h.push(_);this.nodesPerLabel.set(l,h)}}calcGlobalAnalysis(){for(const[o,r]of this.nodesPerLabel)for(const l of r)for(const i of l.getBadPrefixes())this.globalAnalysis.getInitializedValue(o,i).push(l);this.globalAnalysis.sort()}calcBlamingSources(){for(const o of this.nodesPerLabel.values())for(const r of o)for(const[l,i]of r.getBadSourcesByPrefix())for(const d of i)this.blamingSources.getInitializedValue(d,l).push(r);this.blamingSources.sort()}calcRootOccurrences(){for(const o of this.nodesPerLabel.values())for(const r of o)this.rootOccurrences.addMap(r.getAllRootOccurrences())}}const x=ue({state(){return new xe},getters:{getNode:t=>e=>t.get(e),getNodesByLabel:t=>e=>t.nodesPerLabel.get(e),countRootOccurrences:t=>(e,o)=>t.rootOccurrences.getValue(e,o)},mutations:{setSelectedFiles(t,e){t.selectedFiles=e},loadNodes(t,e){t.clear(),t.nodesPerLabel.clear(),t.globalAnalysis.clear(),t.rootOccurrences.clear();const o=e.split(`
`);for(const r of o){const l=JSON.parse(r),i=new Q(l);i.children.length>2&&t.set(i.id,i)}t.calcNodesPerLabel(),t.calcGlobalAnalysis(),t.calcBlamingSources(),t.calcRootOccurrences()},clearNodes(t){t.clear(),t.nodesPerLabel.clear(),t.globalAnalysis.clear(),t.rootOccurrences.clear()}}}),De={class:"d-flex flex-row"},Me={class:"d-flex flex-row"},Oe=["onClick"],Te={data(){return{selectedLabel:null,selectedPrefix:null,showInformation:!1}}},Fe=O({...Te,__name:"GlobalAnalysis",setup(t){return(e,o)=>{const r=a("v-toolbar-title"),l=a("v-spacer"),i=a("v-btn"),d=a("v-snackbar"),h=a("v-toolbar"),_=a("v-tab"),w=a("v-tabs"),V=a("v-divider"),b=a("v-list-item"),I=a("router-link"),D=a("v-list"),T=a("v-window-item"),m=a("v-window"),u=a("v-card");return c(),p(u,null,{default:s(()=>[n(h,{color:"primary"},{default:s(()=>[n(r,null,{default:s(()=>[y(S(e.$t("Analysis")),1)]),_:1}),n(l),n(i,{icon:"mdi-information-variant-circle-outline",onClick:o[0]||(o[0]=v=>e.showInformation=!0)}),n(d,{modelValue:e.showInformation,"onUpdate:modelValue":o[2]||(o[2]=v=>e.showInformation=v)},{actions:s(()=>[n(i,{icon:"mdi-close",color:"red",onClick:o[1]||(o[1]=v=>e.showInformation=!1)})]),default:s(()=>[y(S(e.$t("GlobalAnalysisHelp"))+" ",1)]),_:1},8,["modelValue"])]),_:1}),C("div",De,[n(w,{modelValue:e.selectedLabel,"onUpdate:modelValue":o[3]||(o[3]=v=>e.selectedLabel=v),direction:"vertical"},{default:s(()=>[(c(!0),g(P,null,k(A(x).state.globalAnalysis.keys(),v=>(c(),p(_,{key:v,value:v,text:v},null,8,["value","text"]))),128))]),_:1},8,["modelValue"]),n(V,{vertical:""}),n(m,{class:"w-100",modelValue:e.selectedLabel,"onUpdate:modelValue":o[6]||(o[6]=v=>e.selectedLabel=v)},{default:s(()=>[(c(!0),g(P,null,k(A(x).state.globalAnalysis,([v,z])=>(c(),p(T,{key:v,value:v},{default:s(()=>[C("div",Me,[n(w,{modelValue:e.selectedPrefix,"onUpdate:modelValue":o[4]||(o[4]=N=>e.selectedPrefix=N),direction:"vertical"},{default:s(()=>[(c(!0),g(P,null,k(z.keys(),N=>(c(),p(_,{key:N,value:N,text:N},null,8,["value","text"]))),128))]),_:2},1032,["modelValue"]),n(V,{vertical:""}),n(m,{class:"w-100",modelValue:e.selectedPrefix,"onUpdate:modelValue":o[5]||(o[5]=N=>e.selectedPrefix=N)},{default:s(()=>[(c(!0),g(P,null,k(z,([N,$])=>(c(),p(T,{key:N,value:N},{default:s(()=>[n(D,{class:"pa-0 w-100",lines:"one"},{default:s(()=>[(c(!0),g(P,null,k($,L=>(c(),p(I,{key:L.id,to:{path:"/"+v,query:{node:L.id}},custom:""},{default:s(({navigate:M})=>[C("span",{onClick:M},[n(b,{title:L.id,subtitle:e.$t("Score")+": "+L.getScore(N),value:L},null,8,["title","subtitle","value"])],8,Oe)]),_:2},1032,["to"]))),128))]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue"])])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),_:1})}}}),Re={class:"d-flex flex-row"},Ue={class:"d-flex flex-row"},Ee=["onClick"],He={data(){return{selectedSource:"",selectedPrefix:"",showInformation:!1}},computed:{...K(["countRootOccurrences"])},methods:{getCriticalNodesAllOccurrencesText(t){let e=0;for(const r of t)e+=r.getRootOccurrences(this.selectedSource,this.selectedPrefix);let o=this.$t("CriticalNodesRootOccurrences");return o=o.replace("%0",e.toString()),o=o.replace("%1",this.countRootOccurrences(this.selectedSource,this.selectedPrefix)||0),o}}},Ge=O({...He,__name:"BlamingCard",setup(t){return(e,o)=>{const r=a("v-toolbar-title"),l=a("v-spacer"),i=a("v-btn"),d=a("v-snackbar"),h=a("v-toolbar"),_=a("v-tab"),w=a("v-tabs"),V=a("v-divider"),b=a("v-chip"),I=a("v-list-item"),D=a("router-link"),T=a("v-list"),m=a("v-window-item"),u=a("v-window"),v=a("v-card");return c(),p(v,null,{default:s(()=>[n(h,{color:"primary"},{default:s(()=>[n(r,null,{default:s(()=>[y(S(e.$t("CriticalDataSources")),1)]),_:1}),n(l),n(i,{icon:"mdi-information-variant-circle-outline",onClick:o[0]||(o[0]=z=>e.showInformation=!0)}),n(d,{modelValue:e.showInformation,"onUpdate:modelValue":o[2]||(o[2]=z=>e.showInformation=z)},{actions:s(()=>[n(i,{icon:"mdi-close",color:"red",onClick:o[1]||(o[1]=z=>e.showInformation=!1)})]),default:s(()=>[y(S(e.$t("BlamingHelp"))+" ",1)]),_:1},8,["modelValue"])]),_:1}),C("div",Re,[n(w,{modelValue:e.selectedSource,"onUpdate:modelValue":o[3]||(o[3]=z=>e.selectedSource=z),direction:"vertical"},{default:s(()=>[(c(!0),g(P,null,k(A(x).state.blamingSources.keys(),z=>(c(),p(_,{key:z,value:z,text:z},null,8,["value","text"]))),128))]),_:1},8,["modelValue"]),n(V,{vertical:""}),n(u,{class:"w-100",modelValue:e.selectedSource,"onUpdate:modelValue":o[6]||(o[6]=z=>e.selectedSource=z)},{default:s(()=>[(c(!0),g(P,null,k(A(x).state.blamingSources,([z,N])=>(c(),p(m,{key:z,value:z},{default:s(()=>[C("div",Ue,[n(w,{modelValue:e.selectedPrefix,"onUpdate:modelValue":o[4]||(o[4]=$=>e.selectedPrefix=$),direction:"vertical"},{default:s(()=>[(c(!0),g(P,null,k(N.keys(),$=>(c(),p(_,{key:$,value:$},{default:s(()=>[y(S($)+" ",1),n(b,{size:"x-small"},{default:s(()=>{var L;return[y(S((L=N.get($))==null?void 0:L.length),1)]}),_:2},1024)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue"]),n(V,{vertical:""}),n(u,{class:"w-100",modelValue:e.selectedPrefix,"onUpdate:modelValue":o[5]||(o[5]=$=>e.selectedPrefix=$)},{default:s(()=>[(c(!0),g(P,null,k(N,([$,L])=>(c(),p(m,{key:$,value:$},{default:s(()=>[n(h,null,{default:s(()=>[n(r,null,{default:s(()=>[y(S(e.getCriticalNodesAllOccurrencesText(L)),1)]),_:2},1024)]),_:2},1024),n(T,{class:"pa-0 w-100",lines:"one"},{default:s(()=>[(c(!0),g(P,null,k(L,M=>(c(),p(D,{key:M.id,to:{path:"/"+M.label.value,query:{node:M.id}},custom:""},{default:s(({navigate:X})=>[C("span",{onClick:X},[n(I,{title:M.label.name+" ("+M.id+")",subtitle:e.$t("Score")+": "+M.getScore($),value:M},null,8,["title","subtitle","value"])],8,Ee)]),_:2},1032,["to"]))),128))]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:2},1032,["modelValue"])])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),_:1})}}}),We={data(){return{inProgress:!1,selectedFiles:x.state.selectedFiles,analysisKey:0,blamingKey:0}},methods:{...me(["loadNodes","setSelectedFiles","clearNodes"])},watch:{async selectedFiles([t]){if(this.setSelectedFiles(this.selectedFiles),!t){this.clearNodes();return}this.inProgress=!0;try{const e=await t.text();this.loadNodes(e),this.analysisKey++,this.blamingKey++}finally{this.inProgress=!1}}}},Ke=O({...We,__name:"HomeView",setup(t){return(e,o)=>{const r=a("v-file-input"),l=a("v-progress-circular"),i=a("v-overlay"),d=a("v-card"),h=a("router-link"),_=a("v-col"),w=a("v-row"),V=a("v-container");return c(),g("main",null,[n(V,null,{default:s(()=>[n(r,{accept:".json",label:e.$t("SelectFile"),modelValue:e.selectedFiles,"onUpdate:modelValue":o[0]||(o[0]=b=>e.selectedFiles=b)},null,8,["label","modelValue"]),n(i,{modelValue:e.inProgress,"onUpdate:modelValue":o[1]||(o[1]=b=>e.inProgress=b),persistent:"",class:"align-center justify-center"},{default:s(()=>[n(l,{indeterminate:"",size:"64",color:"primary"})]),_:1},8,["modelValue"]),n(w,null,{default:s(()=>[(c(!0),g(P,null,k(A(x).state.nodesPerLabel,([b,I])=>(c(),p(_,{class:"flex-fill",key:b,value:b,cols:"auto"},{default:s(()=>[n(h,{to:"/"+b,custom:""},{default:s(({navigate:D})=>[n(d,{onClick:D,title:b,subtitle:e.$t("Trees")+": "+I.length.toString()},null,8,["onClick","title","subtitle"])]),_:2},1032,["to"])]),_:2},1032,["value"]))),128))]),_:1}),A(x).state.nodesPerLabel.size>0?(c(),p(Fe,{key:e.analysisKey,class:"mt-10"})):F("",!0),A(x).state.nodesPerLabel.size>0?(c(),p(Ge,{key:e.blamingKey,class:"mt-10"})):F("",!0)]),_:1})])}}}),qe={data(){return{theme:R().global.name}},methods:{getOptions(){var o;const t={title:{text:this.prefix,left:"center"},backgroundColor:"rgb(var(--v-theme-on-surface-variant))",tooltip:{trigger:"item",formatter:"{b}: {c}"},label:{position:"left",verticalAlign:"middle",align:"right",color:"rgba(var(--v-theme-on-surface), var(--v-high-emphasis-opacity))"}},e={type:"tree",orient:"RL",data:[]};return(o=e.data)==null||o.push(this.buildSeries(this.node)),t.series=e,t},buildSeries(t){const e={name:t.getScore(this.prefix).toString(),value:t.label.value+" / "+t.id};if(t.children.length>0){e.children=[];for(const o of t.children)o.hasPrefix(this.prefix)&&e.children.push(this.buildSeries(o))}return e}}},Ze=O({...qe,__name:"TreeAnalysis",props:{node:{},prefix:{}},setup(t){return(e,o)=>(c(),g("main",null,[n(A(Z),{class:"chart-full",autoresize:"",theme:e.theme,option:e.getOptions()},null,8,["theme","option"])]))}});const Je={data(){return{theme:R().global.name,showPrefixAnalysis:!1,analyzedPrefix:""}},methods:{getOptions(){var i,d,h;const t={title:{text:this.node.label.value+" / "+this.node.id,left:"center"},yAxis:{type:"value",name:this.$t("Score"),triggerEvent:!0},backgroundColor:"rgb(var(--v-theme-on-surface-variant))",tooltip:{trigger:"item",formatter:"{b}: {c}"}},e={type:"category",name:this.$t("Prefixes"),data:[]},o={type:"bar",data:[]},r=this.node.getBadPrefixes(),l=this.node.getPrefixes();l.sort((_,w)=>q(this.node.getScore(_),this.node.getScore(w)));for(const _ of l)(i=e.data)==null||i.push(_),r.includes(_)?(d=o.data)==null||d.push({value:this.node.getScore(_),itemStyle:{color:"red"}}):(h=o.data)==null||h.push(this.node.getScore(_));return t.xAxis=e,t.series=o,t},onClickChart(t){this.analyzedPrefix=t.name,this.showPrefixAnalysis=!0}}},Qe=O({...Je,__name:"IdScoreDiagram",props:{node:{}},setup(t){return(e,o)=>{const r=a("v-overlay");return c(),g("main",null,[n(A(Z),{class:"chart-full",autoresize:"",theme:e.theme,option:e.getOptions(),onClick:e.onClickChart},null,8,["theme","option","onClick"]),n(r,{modelValue:e.showPrefixAnalysis,"onUpdate:modelValue":o[0]||(o[0]=l=>e.showPrefixAnalysis=l),class:"align-center justify-center"},{default:s(()=>[n(Ze,{node:e.node,prefix:e.analyzedPrefix},null,8,["node","prefix"])]),_:1},8,["modelValue"])])}}});const Xe={data(){return{expanded:!1,showScoreDiagram:!1}},methods:{toggleExpanded(){this.expanded=!this.expanded},onClickIdChip(t){var e,o;(o=this.selectedNodeIds)==null||o.set(t,!((e=this.selectedNodeIds)!=null&&e.get(t)))},onClickNameChip(t){var e,o;(o=this.selectedNodeNames)==null||o.set(t,!((e=this.selectedNodeNames)!=null&&e.get(t)))},onClickAnalyzeIdScores(){this.showScoreDiagram=!0}}},Ye=O({...Xe,__name:"SimpleMappingNode",props:{node:{},selectedNodeIds:{},selectedNodeNames:{}},setup(t){return(e,o)=>{const r=a("v-card-title"),l=a("v-card-subtitle"),i=a("v-col"),d=a("v-btn"),h=a("v-overlay"),_=a("v-tooltip"),w=a("v-row"),V=a("v-chip"),b=a("v-chip-group"),I=a("v-card-item"),D=a("v-expand-transition"),T=a("v-card");return c(),p(T,{density:"compact"},{default:s(()=>[n(w,{class:"flex-nowrap"},{default:s(()=>[n(i,null,{default:s(()=>[n(r,null,{default:s(()=>[y(S(e.node.label.value),1)]),_:1}),n(l,null,{default:s(()=>[y(S(e.node.id.toString()),1)]),_:1})]),_:1}),n(i,{class:"d-flex justify-end align-center pa-6"},{default:s(()=>[n(_,{text:e.$t("Analyze"),location:"bottom"},{activator:s(({props:m})=>[n(d,B(m,{onClick:e.onClickAnalyzeIdScores,density:"compact",variant:"text",icon:"mdi-magnify"}),null,16,["onClick"]),n(h,{modelValue:e.showScoreDiagram,"onUpdate:modelValue":o[0]||(o[0]=u=>e.showScoreDiagram=u),class:"align-center justify-center"},{default:s(()=>[n(Qe,{node:e.node},null,8,["node"])]),_:1},8,["modelValue"])]),_:1},8,["text"]),n(_,{text:e.expanded?e.$t("Collapse"):e.$t("Expand"),location:"bottom"},{activator:s(({props:m})=>[n(d,B(m,{density:"compact",variant:"text",icon:e.expanded?"mdi-chevron-up":"mdi-chevron-down",onClick:e.toggleExpanded}),null,16,["icon","onClick"])]),_:1},8,["text"])]),_:1})]),_:1}),n(I,{subtitle:e.$t("Ids")},{default:s(()=>[n(b,null,{default:s(()=>[(c(!0),g(P,null,k(e.node.getSortedIds(),m=>{var u;return c(),p(V,{class:"userSelectNone",size:"small",ripple:!1,key:m.value,variant:(u=e.selectedNodeIds)!=null&&u.get(m.value)?"outlined":void 0,onClick:v=>e.onClickIdChip(m.value)},{default:s(()=>[y(S(m.value),1)]),_:2},1032,["variant","onClick"])}),128))]),_:1})]),_:1},8,["subtitle"]),n(D,null,{default:s(()=>[ee(C("div",null,[n(I,{subtitle:e.$t("Names")},{default:s(()=>[n(b,null,{default:s(()=>[(c(!0),g(P,null,k(e.node.getSortedNames(),m=>{var u;return c(),p(V,{class:"userSelectNone",size:"small",ripple:!1,key:m,variant:(u=e.selectedNodeNames)!=null&&u.get(m)?"outlined":void 0,onClick:v=>e.onClickNameChip(m)},{default:s(()=>[y(S(m),1)]),_:2},1032,["variant","onClick"])}),128))]),_:1})]),_:1},8,["subtitle"]),n(I,{subtitle:e.$t("Prefixes")},{default:s(()=>[n(b,null,{default:s(()=>[(c(!0),g(P,null,k(e.node.getPrefixes().sort(),m=>(c(),p(V,{class:"userSelectNone",size:"small",ripple:!1,key:m,text:m},{append:s(()=>[n(V,{class:"ma-0 ml-2 text-green",ripple:!1,size:"x-small",color:"red"},{default:s(()=>[y(S(e.node.getScore(m)),1)]),_:2},1024)]),_:2},1032,["text"]))),128))]),_:1})]),_:1},8,["subtitle"])],512),[[te,e.expanded]])]),_:1})]),_:1})}}});const je={key:0},et={data(){return{internalSelectedNodeIds:this.selectedNodeIds!=null?this.selectedNodeIds:new Map,internalSelectedNodeNames:this.selectedNodeNames!=null?this.selectedNodeNames:new Map}}},tt=O({...et,__name:"MappingTree",props:{node:{},selectedNodeIds:{},selectedNodeNames:{}},setup(t){return(e,o)=>{const r=a("MappingTree",!0),l=a("v-table");return c(),p(l,{class:"bg-transparent"},{default:s(()=>[C("tbody",null,[C("tr",null,[e.node.children.length>0?(c(),g("td",je,[(c(!0),g(P,null,k(e.node.children,i=>(c(),g("div",{key:i.id,class:G({borderBottom:e.node.children[e.node.children.length-1]!=i})},[n(r,{node:i,"selected-node-ids":e.internalSelectedNodeIds,"selected-node-names":e.internalSelectedNodeNames},null,8,["node","selected-node-ids","selected-node-names"])],2))),128))])):F("",!0),C("td",{class:G([{borderLeft:e.node.children.length>0},"pa-4 minimumCol align-top"])},[n(Ye,{node:e.node,"selected-node-ids":e.internalSelectedNodeIds,"selected-node-names":e.internalSelectedNodeNames},null,8,["node","selected-node-ids","selected-node-names"])],2)])])]),_:1})}}});const ot={class:"mr-4"},nt={data(){return{nodeList:x.getters.getNodesByLabel(this.getLabel()),selectedNode:void 0}},computed:{...K(["getNode"])},methods:{getLabel(){return this.$route.params.label}},created(){const t=this.$route.query.node;if(t){const e=this.getNode(Number.parseInt(t));e&&(this.selectedNode=e)}}},st=O({...nt,__name:"LabelBoard",setup(t){return(e,o)=>{const r=a("v-list-item"),l=a("v-select"),i=a("v-container");return c(),g("main",null,[n(i,{class:"d-flex align-center"},{default:s(()=>[C("h1",ot,S(e.getLabel()),1),n(l,{label:e.$t("SelectNode"),items:e.nodeList,modelValue:e.selectedNode,"onUpdate:modelValue":o[0]||(o[0]=d=>e.selectedNode=d),"hide-details":""},{selection:s(({item:d})=>[y(S(d.value.id+" ("+d.value.ids.length+" "+e.$t("Ids")+")"),1)]),item:s(({item:d,props:h})=>[n(r,B(h,{title:d.value.id,subtitle:d.value.ids.length+" "+e.$t("Ids")}),null,16,["title","subtitle"])]),_:1},8,["label","items","modelValue"])]),_:1}),e.selectedNode?(c(),p(tt,{key:0,node:e.selectedNode},null,8,["node"])):F("",!0)])}}}),lt=se({history:le("/mapping/"),routes:[{path:"/",name:"home",component:Ke},{path:"/:label",name:"labelBoard",component:st}]});const rt={Analysis:t=>{const{normalize:e}=t;return e(["Analysis"])},Analyze:t=>{const{normalize:e}=t;return e(["Analyze"])},BielefeldUniversity:t=>{const{normalize:e}=t;return e(["Bielefeld University"])},BioinformaticsDepartment:t=>{const{normalize:e}=t;return e(["Bioinformatics/Medical Informatics department"])},BlamingHelp:t=>{const{normalize:e}=t;return e(["Critical data sources lead to clumping and therefore potentially worse mapping. Remove these sources to improve the result."])},Collapse:t=>{const{normalize:e}=t;return e(["Collapse"])},CriticalDataSources:t=>{const{normalize:e}=t;return e(["Critical data sources"])},CriticalNodesRootOccurrences:t=>{const{normalize:e}=t;return e(["Was used here %0 times, total %1 times"])},Documentation:t=>{const{normalize:e}=t;return e(["Documentation"])},Expand:t=>{const{normalize:e}=t;return e(["Expand"])},FacultyOfTechnology:t=>{const{normalize:e}=t;return e(["Faculty of Technology"])},GlobalAnalysisHelp:t=>{const{normalize:e}=t;return e(["The global analysis shows you at first glance which mappings are potentially error-prone. The score gives a guideline for the severity (the higher the more severe)."])},Ids:t=>{const{normalize:e}=t;return e(["Id's"])},Names:t=>{const{normalize:e}=t;return e(["Names"])},Prefixes:t=>{const{normalize:e}=t;return e(["Prefixes"])},ReportError:t=>{const{normalize:e}=t;return e(["Report error"])},Score:t=>{const{normalize:e}=t;return e(["Score"])},SelectFile:t=>{const{normalize:e}=t;return e(["Select file"])},SelectNode:t=>{const{normalize:e}=t;return e(["Select node"])},Theme:t=>{const{normalize:e}=t;return e(["Theme"])},Trees:t=>{const{normalize:e}=t;return e(["Trees"])}},at={Analysis:t=>{const{normalize:e}=t;return e(["Analyse"])},Analyze:t=>{const{normalize:e}=t;return e(["Analysieren"])},BielefeldUniversity:t=>{const{normalize:e}=t;return e(["Universität Bielefeld"])},BioinformaticsDepartment:t=>{const{normalize:e}=t;return e(["AG Bioinformatik/Medizininformatik"])},BlamingHelp:t=>{const{normalize:e}=t;return e(["Kritische Datenquellen führen zu einer Verklumpung und damit zu einem potenziell schlechteren Mapping. Entfernen Sie diese Quellen um das Ergebnis zu verbessern."])},Collapse:t=>{const{normalize:e}=t;return e(["Zuklappen"])},CriticalDataSources:t=>{const{normalize:e}=t;return e(["Kritische Datenquellen"])},CriticalNodesRootOccurrences:t=>{const{normalize:e}=t;return e(["Wurde hier %0-mal verwendet, insgesamt %1-mal"])},Documentation:t=>{const{normalize:e}=t;return e(["Dokumentation"])},Expand:t=>{const{normalize:e}=t;return e(["Erweitern"])},FacultyOfTechnology:t=>{const{normalize:e}=t;return e(["Technische Fakultät"])},GlobalAnalysisHelp:t=>{const{normalize:e}=t;return e(["Die globale Analyse zeigt Ihnen auf den ersten Blick, welche Zuordnungen potenziell fehlerbehaftet sind. Die Punktzahl gibt dabei einen Richtwert für den Schweregrad an (je höher desto schwerer)."])},Ids:t=>{const{normalize:e}=t;return e(["Ids"])},Names:t=>{const{normalize:e}=t;return e(["Namen"])},Prefixes:t=>{const{normalize:e}=t;return e(["Präfixe"])},ReportError:t=>{const{normalize:e}=t;return e(["Fehler melden"])},Score:t=>{const{normalize:e}=t;return e(["Punktzahl"])},SelectFile:t=>{const{normalize:e}=t;return e(["Datei auswählen"])},SelectNode:t=>{const{normalize:e}=t;return e(["Knoten auswählen"])},Theme:t=>{const{normalize:e}=t;return e(["Farbschema"])},Trees:t=>{const{normalize:e}=t;return e(["Bäume"])}},it=we({silentFallbackWarn:!0,silentTranslationWarn:!0,locale:navigator.language,fallbackLocale:"en",messages:{en:rt,de:at}}),ct=ie({components:ce,directives:de});_e([ve,ge,be,ye,ze,Se]);const U=oe($e);U.use(lt);U.use(it);U.use(ct);U.use(x);U.mount("#app");
